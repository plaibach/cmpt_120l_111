<!DOCTYPE HTML>
<html>
<!-- Paul C. Laibach
   2014.10.05
   Introduction to Programming
   Project 2 - Game v0.2.3 -->

<head>
   <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
   <meta name="author" content="Paul C. Laibach" />
   <title>Project 2</title>

   <style type="text/css">
      h1 {font-family:'lucida handwriting', 'comic sans ms', cursive; color:purple;}
      h2 {font-family:he_terminal, monospace;}
      .footer {font-style:italic;}
   </style>

   <script type="text/javascript">

      // Set global variables used across functions
      var currentLocation = "Room1";
      var hasVisitedRoom1 = true;
      var hasVisitedRoom2 = false;
      var hasVisitedRoom3 = false;
      var hasVisitedRoom4 = false;
      var hasVisitedRoom5 = false;
      var totalScore = 0;

      // updateHistory receives and concatenates variables, appends history, and resets inputs and dirty placeholders
      function updateHistory(message, userInput) {
         // Build messages for History and Status displays
         var historyWindow = document.getElementById("taHistory");
            historyWindow.value = message + "\n" + userInput + "\n\n" + taHistory.value;
         var statusWindow = document.getElementById("taStatus");
            statusWindow.value = "Score: " + totalScore + "\n" + "Current Location: " + currentLocation;
         // txtCommand.value has either been evaluated and utilized, or not applied (and possibly dirty), so reset input to blank
         txtCommand.value = "";
         // Since we are here, some form of valid button or text command has been processed, so reset any dirty placeholders
         txtCommand.placeholder="Click direction above -or- Enter text command here"
      }

      function btnGoNorth() {
         var userInput = "[Clicked: North]";

            // Begin conditionals for function btnGoNorth
            if (currentLocation === "Room1") {
               var message = "You have entered Room2.";
               currentLocation = "Room2";
               if (hasVisitedRoom2 === false) {
                  totalScore = totalScore + 5;
               }
               hasVisitedRoom2 = true;

               // Testing remove disabled attribute from btnWest
               document.getElementById("btnWest").removeAttribute("disabled") ;

               
            }  else {
                  if (currentLocation === "Room2") {
                     var message = "You have entered Room3.";
                     currentLocation = "Room3";
                     if (hasVisitedRoom3 === false) {
                        totalScore = totalScore + 5;
                     }
                     hasVisitedRoom3 = true;
                  }  else {
                        if (currentLocation === "Room3") {
                           var message = "You have fallen a long distance down into Room4. Welcome to THE ABYSS! There is no way out :-O (Or... is there?)";
                           currentLocation = "Room4";
                           if (hasVisitedRoom4 === false) {
                              totalScore = totalScore + 5;
                           }
                           hasVisitedRoom4 = true;
                        }  else {
                              if (currentLocation === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLocation === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function btnGoSouth() {
         var userInput = "[Clicked: South]";

            // Begin conditionals for function btnGoSouth
            if (currentLocation === "Room1") {
               var message = "Sorry, the door locked behind you when you stepped in. There is a keyhole, but you don't have any keys.";
            }  else {
                  if (currentLocation === "Room2") {
                     var message = "You have returned to Room1. This isn't getting you anywhere.";
                     currentLocation = "Room1";
                  }  else {
                        if (currentLocation === "Room3") {
                           var message = "You have returned to Room2. Boring.";
                           currentLocation = "Room2";
                           // In basic sequential (walking) navigation, the totalScore update logic, and hasVisitedRoom# update are not necessary. However, let's leave this code in place, to accomodate implementation of navigation by teleportation, hyperspace, or wormhole.
                           if (hasVisitedRoom2 === false) {
                              totalScore = totalScore + 5;
                           }
                           hasVisitedRoom2 = true;
                        }  else {
                              if (currentLocation === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLocation === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function btnGoEast() {
         var userInput = "[Clicked: East]";

            // Begin conditionals for function btnGoEast
            if (currentLocation === "Room1") {
               var message = "Erm... sorry. No place to go in that direction.";
            }  else {
                  if (currentLocation === "Room2") {
                     var message = "Erm... sorry. No place to go in that direction.";
                  }  else {
                        if (currentLocation === "Room3") {
                           var message = "Erm... sorry. No place to go in that direction.";
                        }  else {
                              if (currentLocation === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLocation === "Room5") {
                                       var message = "Back in Room2 again. Look at your life. Think about your choices.";
                                       currentLocation = "Room2";
                                       // In basic sequential (walking) navigation, the totalScore update logic, and hasVisitedRoom# update are not necessary. However, let's leave this code in place, to accomodate implementation of navigation by teleportation, hyperspace, or wormhole.
                                       if (hasVisitedRoom2 === false) {
                                          totalScore = totalScore + 5;
                                       }
                                       hasVisitedRoom2 = true;
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function btnGoWest() {
         var userInput = "[Clicked: West]";

            // Begin conditionals for function btnGoWest
            if (currentLocation === "Room1") {
               var message = "Erm... sorry. No place to go in that direction.";
            }  else {
                  if (currentLocation === "Room2") {
                     var message = "You have entered Room5, the Annex.";
                     currentLocation = "Room5";
                     if (hasVisitedRoom5 === false) {
                        totalScore = totalScore + 5;
                     }
                     hasVisitedRoom5 = true;
                  }  else {
                        if (currentLocation === "Room3") {
                           var message = "Erm... sorry. No place to go in that direction.";
                        }  else {
                              if (currentLocation === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLocation === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function goTxtCommand() {
         if (txtCommand.value === "") {
            txtCommand.placeholder = "Yo. Yur shootin' blanks... ya'll gotta type sumptin'!";
         }  else {
               var userInput = "[Typed: " + txtCommand.value + "]";
               var message = "Sorry, I don't understand... Just use the buttons for now!";
               updateHistory (message, userInput);
            }
      }

   </script>

</head>
<body>

   <h1> Victoria's Secret </h1>
   <h2 style="color:pink"> A Journey of Death and Lingerie, by Paul Laibach </h2>

   <textarea rows="2" cols="48" id="taStatus" readonly></textarea>
   <br>
   <br>
      <!-- Testing disabled attribute on btnWest -->
      <input type="button"
             id="btnWest"
             value="West"
             disabled="disabled"
             onclick="btnGoWest();" />

      <input type="button"
             id="btnNorth"
             value="North" 
             onclick="btnGoNorth();" />

      <input type="button"
             id="btnSouth"
             value="South" 
             onclick="btnGoSouth();" />

      <input type="button"
             id="btnEast"
             value="East" 
             onclick="btnGoEast();" />
   <br>
      <!-- This will be used in a later version to allow user text input -->
      <input type="text"
             id = "txtCommand"
             name="txtCommand"
             size="40"
             placeholder="Click direction above -or- Enter text command here"
             onkeypress="if (event.keyCode == 13) goTxtCommand();" />
             
      <input type="button"
             id="btnGoTxtCommand"
             name="btnGoTxtCommand"
             value="Go" 
             onclick="goTxtCommand();" />
   <br>

   <textarea rows="12" cols="48" id="taHistory" readonly>You have just entered an unmarked door at the south end of a nondescript building. The door swings gently shut behind you and latches with a slight, yet somehow ominous "click."</textarea>
   <br>
   <br>

   <!-- mailto: link to send you e-mail -->
   <a href="mailto:marist@laibach.net">Email me!</a>
   <br>
   <br>

   <p class="footer">
      <a href="http://validator.w3.org/#validate_by_input">Validate as HTML5</a>
      <br>
      <a href="http://jigsaw.w3.org/css-validator/#validate_by_input">Validate CSS</a>
   </p>

   <p>
      <a href="http://jigsaw.w3.org/css-validator/check/referer">
         <img style="border:0;width:88px;height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valid CSS!" />
      </a>
   </p>

</body>

</html>