<!DOCTYPE HTML>
<html>
<!-- Paul C. Laibach
   Introduction to Programming
   Project 3 - Game v0.4
   Due 2014.10.23 -->

<head>
   <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
   <meta name="author" content="Paul C. Laibach" />
   <title>Project 2</title>

   <!-- padding: top right bottom left; --> 
   <style type="text/css">
      h1 {
         font-family:'lucida handwriting', 'comic sans ms', cursive;
         font-size: 235%;
         color:purple;
      }
      h2 {
         font-family:'comic sans ms', cursive; color:pink;
         font-size: 140%;
      }
      h3 {
         font-family:'courier new';
         font-size: 120%;
      }
      textarea {
         outline: none;
      }
      textarea[name=taStatus] {
         resize: none;
      }
      .footer {font-style:italic;}
   </style>

   <script type="text/javascript">

      // Set global variables used across functions
      // Must be declared and defined prior to onload event
      var currentLoc = "Room1";
      var hasVisitedRoom1 = true;
      var hasVisitedRoom2 = false;
      var hasVisitedRoom3 = false;
      var hasVisitedRoom4 = false;
      var hasVisitedRoom5 = false;
      var totalScore = 0;

      // Execute upon page load
      // Not utilized in this version
      // function init() {
      //    alert ("Init!")
      // }
      
      // updateHistory receives and concatenates variables, appends history, and resets inputs and dirty placeholders
      function updateHistory(message, userInput) {
         // Build messages for History and Status displays
         var historyWindow = document.getElementById("taHistory");
            historyWindow.value = message + "\n" + userInput + "\n\n" + taHistory.value;
         var statusWindow = document.getElementById("taStatus");
            statusWindow.value = "Score: " + totalScore + "\n" + "Current Location: " + currentLoc;
         // txtCommand.value has either been evaluated and utilized, or not applied (and possibly dirty), so reset input to blank
         txtCommand.value = "";
         // Since we are here, some form of valid button or text command has been processed, so reset any dirty placeholders
         txtCommand.placeholder="Click direction above -or- Enter text command here"
      }

      function attemptGoNorth() {
         var userInput = "[Attempt: North]";

            // Begin conditionals for function attemptGoNorth
            if (currentLoc === "Room1") {
               var message = "You have entered Room2.";
               currentLoc = "Room2";
               if (hasVisitedRoom2 === false) {
                  totalScore = totalScore + 5;
               }
               hasVisitedRoom2 = true;

               // Testing remove disabled attribute from btnWest
               document.getElementById("btnGoWest").removeAttribute("disabled") ;

               
            }  else {
                  if (currentLoc === "Room2") {
                     var message = "You have entered Room3.";
                     currentLoc = "Room3";
                     if (hasVisitedRoom3 === false) {
                        totalScore = totalScore + 5;
                     }
                     hasVisitedRoom3 = true;
                  }  else {
                        if (currentLoc === "Room3") {
                           var message = "You have fallen a long distance down into Room4. Welcome to THE ABYSS! There is no way out :-O (Or... is there?)";
                           currentLoc = "Room4";
                           if (hasVisitedRoom4 === false) {
                              totalScore = totalScore + 5;
                           }
                           hasVisitedRoom4 = true;
                        }  else {
                              if (currentLoc === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLoc === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function attemptGoSouth() {
         var userInput = "[Attempt: South]";

            // Begin conditionals for function attemptGoSouth
            if (currentLoc === "Room1") {
               var message = "Sorry, the door locked behind you when you stepped in. There is a keyhole, but you don't have any keys.";
            }  else {
                  if (currentLoc === "Room2") {
                     var message = "You have returned to Room1. This isn't getting you anywhere.";
                     currentLoc = "Room1";
                  }  else {
                        if (currentLoc === "Room3") {
                           var message = "You have returned to Room2. Boring.";
                           currentLoc = "Room2";
                           // In basic sequential (walking) navigation, the totalScore update logic, and hasVisitedRoom# update are not necessary. However, let's leave this code in place, to accomodate implementation of navigation by teleportation, hyperspace, or wormhole.
                           if (hasVisitedRoom2 === false) {
                              totalScore = totalScore + 5;
                           }
                           hasVisitedRoom2 = true;
                        }  else {
                              if (currentLoc === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLoc === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function attemptGoEast() {
         var userInput = "[Attempt: East]";

            // Begin conditionals for function attemptGoEast
            if (currentLoc === "Room1") {
               var message = "Erm... sorry. No place to go in that direction.";
            }  else {
                  if (currentLoc === "Room2") {
                     var message = "Erm... sorry. No place to go in that direction.";
                  }  else {
                        if (currentLoc === "Room3") {
                           var message = "Erm... sorry. No place to go in that direction.";
                        }  else {
                              if (currentLoc === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLoc === "Room5") {
                                       var message = "Back in Room2 again. Look at your life. Think about your choices.";
                                       currentLoc = "Room2";
                                       // In basic sequential (walking) navigation, the totalScore update logic, and hasVisitedRoom# update are not necessary. However, let's leave this code in place, to accomodate implementation of navigation by teleportation, hyperspace, or wormhole.
                                       if (hasVisitedRoom2 === false) {
                                          totalScore = totalScore + 5;
                                       }
                                       hasVisitedRoom2 = true;
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function attemptGoWest() {
         var userInput = "[Attempt: West]";

            // Begin conditionals for function attemptGoWest
            if (currentLoc === "Room1") {
               var message = "Erm... sorry. No place to go in that direction.";
            }  else {
                  if (currentLoc === "Room2") {
                     var message = "You have entered Room5, the Annex.";
                     currentLoc = "Room5";
                     if (hasVisitedRoom5 === false) {
                        totalScore = totalScore + 5;
                     }
                     hasVisitedRoom5 = true;
                  }  else {
                        if (currentLoc === "Room3") {
                           var message = "Erm... sorry. No place to go in that direction.";
                        }  else {
                              if (currentLoc === "Room4") {
                                 var message = "It rubs the lotion on its skin or else it gets the hose again.";
                              }  else {
                                    if (currentLoc === "Room5") {
                                       var message = "Erm... sorry. No place to go in that direction.";
                                    }
                                 }
                           }
                     }
               }
         updateHistory (message, userInput);
      }

      function processTxtCommand() {
         if (txtCommand.value === "") {
            txtCommand.placeholder = "Yo. Yur shootin' blanks... ya'll gotta type sumptin'!";
         }  else {
               var userInput = "[Typed: " + txtCommand.value + "]";
               var txtCommandLowcase = txtCommand.value.toLowerCase();
               if (txtCommandLowcase === "w") {
                  attemptGoWest()
               }
               var message = "Sorry, I don't understand... Just use the buttons for now!";
               updateHistory (message, userInput);
            }
      }

   </script>

</head>

<!-- 
   Execute upon page load
   Not utilized in this version
      <body onload="init();">
-->
<body>
   <h1>
      Victoria's Secret
   </h1>

   <h2>
      A Journey of Death and Lingerie
   </h2>

   <h3>
      by Paul Laibach
   </h3>

   <textarea id="taStatus" name="taStatus" rows="2" cols="48" readonly style="color: blue; background-color: beige"></textarea>
   <br>
   <br>

      <!-- Testing disabled attribute on btnWest -->
      <input type="button"
             id="btnGoWest"
             value="West"
             disabled="disabled"
             onclick="attemptGoWest();" />

      <input type="button"
             id="btnGoNorth"
             value="North" 
             onclick="attemptGoNorth();" />

      <input type="button"
             id="btnGoSouth"
             value="South" 
             onclick="attemptGoSouth();" />

      <input type="button"
             id="btnGoEast"
             value="East" 
             onclick="attemptGoEast();" />
   <br>
   <br>

      <input type="text"
             id = "txtCommand"
             name="txtCommand"
             size="40"
             placeholder="Click direction above -or- Enter text command here"
             onkeypress="if (event.keyCode == 13) processTxtCommand();" />
             
      <input type="button"
             id="btnTxtCommand"
             name="btnTxtCommand"
             value="Go" 
             onclick="processTxtCommand();" />
   <br>
   <br>

   <textarea rows="12" cols="48" id="taHistory" readonly>You have just entered an unmarked door at the south end of a nondescript building. The door swings gently shut behind you and latches with a slight, yet somehow ominous "click."</textarea>
   <br>
   <br>

   <!-- mailto: link to send you e-mail -->
   <a href="mailto:marist@laibach.net">Email me!</a>
   <br>
   <br>

   <p class="footer">
      <a href="http://validator.w3.org/#validate_by_input">Validate as HTML5</a>
      <br>
      <a href="http://jigsaw.w3.org/css-validator/#validate_by_input">Validate CSS</a>
   </p>

   <p>
      <a href="http://jigsaw.w3.org/css-validator/check/referer">
         <img style="border:0;width:88px;height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valid CSS!" />
      </a>
   </p>

</body>

</html>